<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Consumindo API com React</title>
  <!-- React e ReactDOM via CDN -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <!-- Babel para interpretar JSX diretamente no navegador -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Axios via CDN -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
  <div id="root"></div>

  <!-- Seu código React dentro de Babel -->
  <script type="text/babel">
    const { useState, useEffect } = React;

    const ApiComponent = () => {
      const [users, setUsers] = useState([]);
      const [apiState, setApiState] = useState('idle');
      const [error, setError] = useState(null);

      useEffect(() => {
        const fetchUsers = async () => {
          setApiState('loading');
          setError(null);
          try {
            const response = await axios.get('https://jsonplaceholder.typicode.com/users');
            setUsers(response.data);
            setApiState('success');
          } catch (err) {
            setApiState('error');
            setError(err.message || 'Erro desconhecido');
          }
        };
        fetchUsers();
      }, []);

      return (
        <div style={{ maxWidth: '800px', margin: '0 auto', padding: '20px', fontFamily: 'Arial, sans-serif' }}>
          <h1 style={{ color: '#333', textAlign: 'center' }}>CONSUMINDO API NO FRONT-END</h1>
          <p style={{ textAlign: 'center', color: '#666' }}>Componente reutilizável para todos os projetos</p>

          {apiState === 'loading' && (
            <div style={{ textAlign: 'center', padding: '40px', backgroundColor: '#f9f9f9', borderRadius: '8px', margin: '20px 0' }}>
              <div style={{ fontSize: '48px', marginBottom: '10px' }}>⏳</div>
              <h3>Carregando dados...</h3>
              <p>Buscando informações da API</p>
            </div>
          )}

          {apiState === 'error' && error && (
            <div style={{ textAlign: 'center', padding: '40px', backgroundColor: '#ffe6e6', borderRadius: '8px', margin: '20px 0', border: '1px solid #ff4d4d' }}>
              <div style={{ fontSize: '48px', marginBottom: '10px' }}>❌</div>
              <h3 style={{ color: '#cc0000' }}>Erro ao carregar os dados</h3>
              <p>{error}</p>
              <button onClick={() => window.location.reload()} style={{ padding: '10px 20px', backgroundColor: '#ff4d4d', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer', marginTop: '10px' }}>
                Tentar novamente
              </button>
            </div>
          )}

          {apiState === 'success' && (
            <div>
              <div style={{ display: 'flex', backgroundColor: '#2196f3', color: '#fff', padding: '12px', borderRadius: '8px 8px 0 0', fontWeight: 'bold' }}>
                <div style={{ flex: 1 }}>ID</div>
                <div style={{ flex: 2 }}>Nome</div>
                <div style={{ flex: 3 }}>Email</div>
                <div style={{ flex: 2 }}>Telefone</div>
              </div>
              {users.map((user) => (
                <div key={user.id} style={{ display: 'flex', padding: '12px', borderBottom: '1px solid #ddd', backgroundColor: user.id % 2 === 0 ? '#f9f9f9' : 'white' }}>
                  <div style={{ flex: 1, fontWeight: 'bold' }}>#{user.id}</div>
                  <div style={{ flex: 2 }}>{user.name}</div>
                  <div style={{ flex: 3, color: '#555' }}>{user.email}</div>
                  <div style={{ flex: 2, color: '#555' }}>{user.phone}</div>
                </div>
              ))}
            </div>
          )}
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<ApiComponent />);
  </script>
</body>
</html>
